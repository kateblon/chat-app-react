{
  "_args": [
    [
      {
        "raw": "idb@3.0.2",
        "scope": null,
        "escapedName": "idb",
        "name": "idb",
        "rawSpec": "3.0.2",
        "spec": "3.0.2",
        "type": "version"
      },
      "C:\\Users\\bigun\\Desktop\\chat app\\node_modules\\@firebase\\installations"
    ]
  ],
  "_from": "idb@3.0.2",
  "_hasShrinkwrap": false,
  "_id": "idb@3.0.2",
  "_location": "/idb",
  "_nodeVersion": "10.13.0",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/idb_3.0.2_1547462992053_0.3679300695543837"
  },
  "_npmUser": {
    "name": "jaffathecake",
    "email": "jaffathecake@gmail.com"
  },
  "_npmVersion": "6.5.0",
  "_phantomChildren": {},
  "_requested": {
    "raw": "idb@3.0.2",
    "scope": null,
    "escapedName": "idb",
    "name": "idb",
    "rawSpec": "3.0.2",
    "spec": "3.0.2",
    "type": "version"
  },
  "_requiredBy": [
    "/@firebase/installations",
    "/@firebase/messaging"
  ],
  "_resolved": "https://registry.npmjs.org/idb/-/idb-3.0.2.tgz",
  "_shasum": "c8e9122d5ddd40f13b60ae665e4862f8b13fa384",
  "_shrinkwrap": null,
  "_spec": "idb@3.0.2",
  "_where": "C:\\Users\\bigun\\Desktop\\chat app\\node_modules\\@firebase\\installations",
  "author": {
    "name": "Jake Archibald"
  },
  "browser": "build/idb.js",
  "bugs": {
    "url": "https://github.com/jakearchibald/indexeddb-promised/issues"
  },
  "dependencies": {},
  "description": "IndexedDB but with promises",
  "devDependencies": {
    "rollup": "^1.0.2"
  },
  "directories": {},
  "dist": {
    "integrity": "sha512-+FLa/0sTXqyux0o6C+i2lOR0VoS60LU/jzUo5xjfY6+7sEEgy4Gz1O7yFBXvjd7N0NyIGWIRg8DcQSLEG+VSPw==",
    "shasum": "c8e9122d5ddd40f13b60ae665e4862f8b13fa384",
    "tarball": "https://registry.npmjs.org/idb/-/idb-3.0.2.tgz",
    "fileCount": 9,
    "unpackedSize": 198860,
    "npm-signature": "-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJcPGlQCRA9TVsSAnZWagAAd3kP/impqW3/lURVdnM/4ayO\nVCz8EQ4VyRMDDr6gAa0fgFF+z1t9kGCSb0T4aoU7llQHLx4sYcoupXaiocxn\n5xPOPl3UCu2yr8g08h7DX1XEcKfjW+KdrsMugpaHTyb1ZGokuMdEwcjz+akd\n4CoCVS4tnAyxWka/UCFxoSxCN62QtzmPLTRr2qDO9IOKv2rDG64Cc1xN6Oq5\nWqFfV9EacautiRWe2D6NsjkJwFFVAr0+Rm3yQlgFTl2a15Ykj7oNz7RE4a4l\n3lohW3l16kfEImcSgkhWqU/DpJs9Xqqu82IWz9yWlZKW3iNSqZq/0JFJEjAf\nDFc+Pn7GSw3IoY3RNxUvq/JSkPnmOUDkfYi5ksM5pgIKUgZGuZ7ONM/aT8V4\niMyYKQw3VW1wl0/0RozZldD++Owrg+I7PdK1k9xh3FIZArIWWvBpWOUCD4+U\n17TISBFxfSPV6NiqAnZI50Xp0ez3+VCmGRrQj5JHHEaF+054T2ZrdcoTfwYM\n4g8mtFMDpqf+9KAj/7ftcKzA5rExrT2FU8pqsoRxQiWrZu88tQEvOfO9N6bA\n7pZiG4LXkbZVakfnjJL8RP1DJi7nEi0hw5JkdaOQrjdEYGKRR+fD5Q5o6DML\n60wZXdhkfWyOuyF6s01sgT9adGLbkmUUcUdm5ijoZidZlDzKLhLts3fJQnbU\nORhI\r\n=lOpm\r\n-----END PGP SIGNATURE-----\r\n"
  },
  "gitHead": "e1c7c44dbba38415745afc782b8e247da8c833f2",
  "homepage": "https://github.com/jakearchibald/indexeddb-promised#readme",
  "license": "ISC",
  "main": "lib/node.js",
  "maintainers": [
    {
      "name": "jaffathecake",
      "email": "jaffathecake@gmail.com"
    }
  ],
  "module": "lib/idb.mjs",
  "name": "idb",
  "optionalDependencies": {},
  "readme": "# IndexedDB Promised\n\nThis is a tiny library that mirrors IndexedDB, but replaces the weird `IDBRequest` objects with promises, plus a couple of other small changes.\n\n# Installation\n\nIf you're using Rollup/Webpack or similar:\n\n```sh\nnpm install idb\n```\n\nThen in your JS:\n\n```js\nimport { openDb, deleteDb } from 'idb';\n\nawait openDb(…);\n```\n\nOr include [the script](https://github.com/jakearchibald/idb/blob/master/build/idb.js) as it is, and `idb` will exist on the global scope.\n\n# Changes from 2.x\n\nThe library is now a module. To take advantage of this, importing has changed slightly:\n\n```js\n// Old 2.x way:\nimport idb from 'idb';\nidb.open(…);\nidb.delete(…);\n\n// New way:\nimport { openDb, deleteDb } from 'idb';\nopenDb(…);\ndeleteDb(…);\n```\n\n# Examples\n\n## Keyval Store\n\nThis is very similar to `localStorage`, but async. If this is *all* you need, you may be interested in [idb-keyval](https://www.npmjs.com/package/idb-keyval), you can always upgrade to this library later.\n\n```js\nconst dbPromise = openDb('keyval-store', 1, upgradeDB => {\n  upgradeDB.createObjectStore('keyval');\n});\n\nconst idbKeyval = {\n  async get(key) {\n    const db = await dbPromise;\n    return db.transaction('keyval').objectStore('keyval').get(key);\n  },\n  async set(key, val) {\n    const db = await dbPromise;\n    const tx = db.transaction('keyval', 'readwrite');\n    tx.objectStore('keyval').put(val, key);\n    return tx.complete;\n  },\n  async delete(key) {\n    const db = await dbPromise;\n    const tx = db.transaction('keyval', 'readwrite');\n    tx.objectStore('keyval').delete(key);\n    return tx.complete;\n  },\n  async clear() {\n    const db = await dbPromise;\n    const tx = db.transaction('keyval', 'readwrite');\n    tx.objectStore('keyval').clear();\n    return tx.complete;\n  },\n  async keys() {\n    const db = await dbPromise;\n    return db.transaction('keyval').objectStore('keyval').getAllKeys(key);\n  },\n};\n```\n\n### Usage\n\n```js\nidbKeyval.set('foo', {hello: 'world'});\n\n// logs: {hello: 'world'}\nidbKeyval.get('foo').then(val => console.log(val));\n```\n\n## Set of objects\n\nImagine we had a set of objects like…\n\n```json\n{\n  \"id\": 123456,\n  \"data\": {\"foo\": \"bar\"}\n}\n```\n\n### Upgrading existing DB\n\n```js\nconst dbPromise = openDb('keyval-store', 2, upgradeDB => {\n  // Note: we don't use 'break' in this switch statement,\n  // the fall-through behaviour is what we want.\n  switch (upgradeDB.oldVersion) {\n    case 0:\n      upgradeDB.createObjectStore('keyval');\n    case 1:\n      upgradeDB.createObjectStore('objs', {keyPath: 'id'});\n  }\n});\n```\n\n### Adding\n\n```js\ndbPromise.then(db => {\n  const tx = db.transaction('objs', 'readwrite');\n  tx.objectStore('objs').put({\n    id: 123456,\n    data: {foo: \"bar\"}\n  });\n  return tx.complete;\n});\n```\n\n### Getting all\n\n```js\ndbPromise.then(db => {\n  return db.transaction('objs')\n    .objectStore('objs').getAll();\n}).then(allObjs => console.log(allObjs));\n```\n\n### Getting by ID\n\n```js\ndbPromise.then(db => {\n  return db.transaction('objs')\n    .objectStore('objs').get(123456);\n}).then(obj => console.log(obj));\n```\n\n# Limitations\n\n## Transaction lifetime\n\nAn IDB transaction will auto-close if it doesn't have anything to do once microtasks have been processed. As a result, this works fine:\n\n```js\ndbPromise.then(async db => {\n  const tx = db.transaction('keyval', 'readwrite');\n  const store = tx.objectStore('keyval');\n  const val = await store.get('counter') || 0;\n  store.put(val + 1, 'counter');\n  return tx.complete;\n});\n```\n\nBut this doesn't:\n\n```js\ndbPromise.then(async db => {\n  const tx = db.transaction('keyval', 'readwrite');\n  const store = tx.objectStore('keyval');\n  const val = await store.get('counter') || 0;\n  // The transaction will auto-close while the fetch is in-progress\n  const newVal = await fetch('/increment?val=' + val)\n  store.put(newVal, 'counter');\n  return tx.complete;\n});\n```\n\n## Promise issues in older browsers\n\nSome older browsers don't handle promises properly, which causes issues if you do more than one thing in a transaction:\n\n```js\ndbPromise.then(async db => {\n  const tx = db.transaction('keyval', 'readwrite');\n  const store = tx.objectStore('keyval');\n  const val = await store.get('counter') || 0;\n  // In some older browsers, the transaction closes here.\n  // Meaning this next line fails:\n  store.put(val + 1, 'counter');\n  return tx.complete;\n});\n```\n\nAll modern browsers have fixed this. [Test your browser](https://simple-idb-demo.glitch.me/microtask-issue.html).\n\nYou can work around this in some versions of Firefox by using a promise polyfill that correctly uses microtasks, such as [es6-promise](https://github.com/jakearchibald/es6-promise).\n\n# API\n\n## `idb`\n\nThis is your entry point to the API. It's exposed to the global scope unless you're using a module system such as browserify, in which case it's the exported object. If you are using native ES modules, the functions are provided as individual exports, so you can `import * as idb from 'idb'` or `import { openDb, deleteDb } from 'idb'`.\n\n### `openDb(name, version, upgradeCallback)`\n\nThis method returns a promise that resolves to a `DB`.\n\n`name` and `version` behave as they do in `indexedDB.open`.\n\n`upgradeCallback` is called if `version` is greater than the version last opened. It's similar to IDB's `onupgradeneeded`. The callback receives an instance of `UpgradeDB`.\n\n```js\nopenDb('keyval-store', 2, upgradeDB => {\n  // Note: we don't use 'break' in this switch statement,\n  // the fall-through behaviour is what we want.\n  switch (upgradeDB.oldVersion) {\n    case 0:\n      upgradeDB.createObjectStore('keyval');\n    case 1:\n      upgradeDB.createObjectStore('stuff', {keyPath: ''});\n  }\n}).then(db => console.log(\"DB opened!\", db));\n```\n\n### `deleteDb(name)`\n\nBehaves like `indexedDB.deleteDatabase`, but returns a promise.\n\n```js\ndeleteDb('keyval-store').then(() => console.log('done!'));\n```\n\n## `DB`\n\nProperties:\n\n* Same as equivalent properties on an instance of `IDBDatabase`:\n  * `name`\n  * `version`\n  * `objectStoreNames`\n\nMethods:\n\n* `close` - as `idbDatabase.close`\n* `transaction` - as `idbDatabase.transaction`, but returns a `Transaction`\n\n## `UpgradeDB`\n\nAs `DB`, except:\n\nProperties:\n\n* `transaction` - this is a property rather than a method. It's a `Transaction` representing the upgrade transaction\n* `oldVersion` - the previous version of the DB seen by the browser, or 0 if it's new\n\nMethods:\n\n* `createObjectStore` - as `idbDatabase.createObjectStore`, but returns an `ObjectStore`\n* `deleteObjectStore` - as `idbDatabase.deleteObjectStore`\n\n## `Transaction`\n\nProperties:\n\n* `complete` - a promise. Resolves when transaction completes, rejects if transaction aborts or errors\n* Same as equivalent properties on an instance of `IDBTransaction`:\n  * `objectStoreNames`\n  * `mode`\n\nMethods:\n\n* `abort` - as `idbTransaction.abort`\n* `objectStore` - as `idbTransaction.objectStore`, but returns an `ObjectStore`\n\n```js\nopenDb('keyval-store', 1, upgradeDB => {\n  switch (upgradeDB.oldVersion) {\n    case 0:\n      upgradeDB.createObjectStore('keyval');\n  }\n}).then(db => {\n  const tx = db.transaction('keyval', 'readwrite');\n  tx.objectStore('keyval').put('hello', 'world');\n  return tx.complete;\n}).then(() => console.log(\"Done!\"));\n```\n\n## `ObjectStore`\n\nProperties:\n\n* Same as equivalent properties on an instance of `IDBObjectStore`:\n  * `name`\n  * `keyPath`\n  * `indexNames`\n  * `autoIncrement`\n\nMethods:\n\n* Same as equivalent methods on an instance of `IDBObjectStore`, but returns a promise that resolves/rejects based on operation success/failure:\n  * `put`\n  * `add`\n  * `delete`\n  * `clear`\n  * `get`\n  * `getAll`\n  * `getAllKeys`\n  * `count`\n* Same as equivalent methods on an instance of `IDBObjectStore`, but returns a promise that resolves with a `Cursor`:\n  * `openCursor`\n  * `openKeyCursor`\n* `deleteIndex` - as `idbObjectStore.deleteIndex`\n* Same as equivalent methods on an instance of `IDBObjectStore`, but returns an `Index`:\n  * `createIndex`\n  * `index`\n* `iterateCursor` - see below\n* `iterateKeyCursor` - see below\n\n\n### `iterateCursor` & `iterateKeyCursor`\n\nDue to the microtask issues in some browsers, iterating over a cursor using promises doesn't always work:\n\n```js\nconst tx = db.transaction('stuff');\ntx.objectStore('stuff').openCursor().then(function cursorIterate(cursor) {\n  if (!cursor) return;\n  console.log(cursor.value);\n  return cursor.continue().then(cursorIterate);\n});\ntx.complete.then(() => console.log('done'));\n```\n\nSo in the mean time, `iterateCursor` and `iterateKeyCursor` map to `openCursor` & `openKeyCursor`, take identical arguments, plus an additional callback that receives an `IDBCursor`, so the above example becomes:\n\n```js\nconst tx = db.transaction('stuff');\ntx.objectStore('stuff').iterateCursor(cursor => {\n  if (!cursor) return;\n  console.log(cursor.value);\n  cursor.continue();\n});\ntx.complete.then(() => console.log('done'));\n```\n\nThe intent is to remove `iterateCursor` and `iterateKeyCursor` from the library once browsers support promises and microtasks correctly.\n\n## `Index`\n\nProperties:\n\n* Same as equivalent properties on an instance of `IDBIndex`:\n  * `name`\n  * `keyPath`\n  * `multiEntry`\n  * `unique`\n\nMethods:\n\n* Same as equivalent methods on an instance of `IDBIndex`, but returns a promise that resolves/rejects based on operation success/failure:\n  * `get`\n  * `getKey`\n  * `getAll`\n  * `getAllKeys`\n  * `count`\n* Same as equivalent methods on an instance of `IDBIndex`, but returns a promise that resolves with a `Cursor`:\n  * `openCursor`\n  * `openKeyCursor`\n* `iterateCursor` - as `objectStore.iterateCursor` but over the index\n* `iterateKeyCursor` - as `objectStore.iterateKeyCursor` but over the index\n\n## Cursor\n\nProperties:\n\n* Same as equivalent properties on an instance of `IDBCursor`:\n  * `direction`\n  * `key`\n  * `primaryKey`\n  * `value`\n\nMethods:\n\n* Same as equivalent methods on an instance of `IDBCursor`, but returns a promise that resolves/rejects based on operation success/failure:\n  * `update`\n  * `delete`\n* Same as equivalent methods on an instance of `IDBCursor`, but returns a promise that resolves with a `Cursor`:\n  * `advance`\n  * `continue`\n  * `continuePrimaryKey`\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/jakearchibald/indexeddb-promised.git"
  },
  "scripts": {
    "build": "rollup lib/idb.mjs --file build/idb.js --format umd --name idb"
  },
  "typings": "lib/idb.d.ts",
  "version": "3.0.2"
}
